webpackJsonp([1],{"9M+g":function(t,e){},"9xt+":function(t,e){},Hy9K:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("7+uW"),i=s("Tqaz"),a=(s("Jmt5"),s("9M+g"),s("Dd8w")),n=s.n(a),o=s("NYxO"),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"agent-header"},[s("h3",[s("strong",[t._v("Welcome, Agent!")])]),t._v(" "),s("h4",[s("strong",[t._v("Earnings: ")]),t._v("\n      "+t._s(t._f("currency")(.1*t.state.totalMoneyForTrips))+"\n    ")])]),t._v(" "),t.state.todaysTrips.length?t._e():s("div",[t._m(0),t._v(" "),s("h5",[t._v("There are no trips today")])]),t._v(" "),t.state.todaysTrips.length?s("b-container",[s("h3",[t._v("Today's Trips:")]),t._v(" "),s("b-card-group",{attrs:{deck:""}},t._l(t.state.todaysTrips,function(e,r){return s("b-card",{key:e.id,staticClass:"todays-trip",attrs:{overlay:"",title:"Todays Trip "+(r+1),"img-src":t.state.allDestinations[e.destinationID-1].image}},[s("b-card-text",[s("strong",[t._v(" Traveler: ")]),t._v(" "),s("br"),t._v("\n          "+t._s(t.state.travelers[e.userID-1].name)+" "),s("br"),t._v(" "),s("strong",[t._v(" Destination: ")]),t._v(" "),s("br"),t._v("\n          "+t._s(t.state.allDestinations[e.destinationID-1].destination)+"\n          "),s("br"),t._v(" "),s("strong",[t._v(" Trip Date: ")]),t._v(" "),s("br"),t._v("\n          "+t._s(e.date)+" "),s("br"),t._v(" "),s("strong",[t._v(" Trip Status: ")]),s("br"),t._v("\n          "+t._s(e.status)+"\n        ")])],1)}),1)],1):t._e(),t._v(" "),t._m(1),t._v(" "),s("div",[s("b-card-group",{attrs:{deck:""}},t._l(t.state.pendingTrips,function(e,r){return s("b-card",{key:e.id,attrs:{overlay:"",title:"Pending Trip "+(r+1),"img-src":t.state.allDestinations[e.destinationID-1].image},scopedSlots:t._u([{key:"footer",fn:function(){return[s("b-button",{staticClass:"approve-button",on:{click:function(s){return t.approveTrip(e.id)}}},[t._v("Approve")]),t._v(" "),s("b-button",{staticClass:"delete-button",on:{click:function(s){return t.deleteTrip(e.id)}}},[t._v("Delete")])]},proxy:!0}],null,!0)},[s("b-card-text",[s("strong",[t._v(" Traveler: ")]),t._v(" "),s("br"),t._v("\n          "+t._s(t.state.travelers[e.userID-1].name)+" "),s("br"),t._v(" "),s("strong",[t._v(" Destination: ")]),t._v(" "),s("br"),t._v("\n          "+t._s(t.state.allDestinations[e.destinationID-1].destination)+"\n          "),s("br"),t._v(" "),s("strong",[t._v(" Trip Date: ")]),t._v(" "),s("br"),t._v("\n          "+t._s(e.date)+"\n        ")])],1)}),1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",[e("strong",[this._v("Todays Trips:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",[e("strong",[this._v("Pending Trips:")])])}]};var d=s("VU/8")({name:"AgentDashboard",mounted:function(){!1===this.$store.state.agentLoggedIn&&this.$router.push("/"),this.$store.state.pendingTrips.length||this.$store.dispatch("getPendingTrips",this.allTrips),this.$store.dispatch("getTodaysTrips"),this.$store.dispatch("getAgentEarnings")},methods:{approveTrip:function(t){this.$store.dispatch("approveTrip",t)},deleteTrip:function(t){this.$store.dispatch("deleteTrip",t)}},computed:{},data:function(){return{trip:"",state:this.$store.state,allTrips:this.$store.state.allTrips}}},l,!1,function(t){s("ftKZ")},"data-v-47ccbdcd",null).exports,u=s("OjAt"),p=s.n(u);r.default.use(p.a);var c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.state.travelerLoggedIn?s("div",[s("b-container",{staticClass:"traveler-info"},[s("h3",[t._v("Hello, "+t._s(t.state.traveler.name))]),t._v(" "),s("h4",[t._v("You are a "+t._s(t.state.traveler.travelerType))]),t._v(" "),s("h5",[t._v("\n      You have spent "+t._s(t._f("currency")(t.addTotalTripCosts))+" on traveling this\n      year!\n    ")])]),t._v(" "),s("h1",{staticClass:"upcoming-trips-h1"},[t._v("Your Upcoming Trips:")]),t._v(" "),this.$store.state.travelersUpcomingTrips.length?s("div",{staticClass:"upcoming-trips"},t._l(t.state.travelersUpcomingTrips,function(e,r){return s("div",{key:r,staticClass:"trips"},[s("div",{staticClass:"destinationimage"},[s("img",{attrs:{src:t.state.allDestinations[e.destinationID-1].image}})]),t._v(" "),s("div",{staticClass:"trip-date"},[s("strong",[t._v("Trip Date:")]),t._v("\n        "+t._s(e.date)+"\n      ")]),t._v(" "),s("div",{staticClass:"trip-destination"},[s("strong",[t._v("Trip Destination:")]),t._v("\n        "+t._s(t.state.allDestinations[e.destinationID-1].destination)+"\n      ")]),t._v(" "),s("div",{staticClass:"trip-duration"},[s("strong",[t._v("Trip Duration: ")]),t._v(t._s(e.duration)+" days\n      ")]),t._v(" "),s("div",{staticClass:"trip-status"},[s("strong",[t._v("Trip Status:")]),t._v("\n        "+t._s(e.status)+"\n      ")])])}),0):t._e(),t._v(" "),s("h1",[t._v("Your Previous Trips:")]),t._v(" "),s("div",{staticClass:"previous-trips"},t._l(t.state.travelersPreviousTrips,function(e,r){return s("div",{key:r,staticClass:"trips"},[s("div",{staticClass:"destinationimage"},[s("img",{attrs:{src:t.state.allDestinations[e.destinationID-1].image}})]),t._v(" "),s("div",{staticClass:"trip-date"},[s("strong",[t._v("Trip Date:")]),t._v("\n        "+t._s(e.date)+"\n      ")]),t._v(" "),s("div",{staticClass:"trip-destination"},[s("strong",[t._v("Trip Destination:")]),t._v("\n        "+t._s(t.state.allDestinations[e.destinationID-1].destination)+"\n      ")]),t._v(" "),s("div",{staticClass:"trip-duration"},[s("strong",[t._v("Trip Duration: ")]),t._v(t._s(e.duration)+" days\n      ")]),t._v(" "),s("div",{staticClass:"trip-status"},[s("strong",[t._v("Trip Status:")]),t._v("\n        "+t._s(e.status)+"\n      ")])])}),0),t._v(" "),s("router-view")],1):t._e()},staticRenderFns:[]};var v=s("VU/8")({mounted:function(){!1===this.$store.state.travelerLoggedIn&&this.$router.push("/"),!1===this.$store.state.tripRequestFormValid&&(this.$store.dispatch("getTravelersTrips"),this.$store.dispatch("getTravsTripsAndDestinations"),this.$store.dispatch("getUpcomingAndPastTrips"),this.$store.dispatch("calcAmntTravSpent"))},data:function(){return{componentKey:0,state:this.$store.state,travId:this.$store.state.travId,travelers:this.$store.state.travelers.travelers,trips:this.$store.state.allTrips,upcomingTrips:[],pastTrips:[],trip:{},destination:{},destinationImage:"",picUrl:""}},computed:{addTotalTripCosts:function(){return this.$store.state.eachTripsCost.reduce(function(t,e){return t+e},0)}},methods:{forceRerender:function(){this.componentKey+=1}},components:{}},c,!1,function(t){s("uwAa")},"data-v-1efdbb0c",null).exports,g={mounted:function(){this.$store.dispatch("getAllTrips"),this.$store.dispatch("getAllTravelers")},data:function(){return{loginForm:{username:"",password:""},errors:[]}},components:{agentDashboard:d,travelerDashboard:v},methods:{validateFormAndUser:function(){this.$store.dispatch("checkForErrors",this.loginForm),!0===this.$store.state.formIsValid&&(this.$store.dispatch("validatePassword",this.loginForm),!0===this.$store.state.passwordIsValid&&(this.$store.dispatch("validateUsername",this.loginForm),this.$store.state.usernameIsValid&&(this.$store.dispatch("determineUser",this.loginForm),"agency"===this.whichUser?this.$store.dispatch("agentLogin"):this.$store.dispatch("travelerLogin",this.loginForm))))},pushToTripRequestPage:function(){this.$router.push("/trip-request-form")},pushHome:function(){this.loginForm.username="",this.loginForm.password="",this.$router.push("/"),this.$store.dispatch("logOut")},pushToTravelerPage:function(){this.$router.push("/traveler-search")}},computed:n()({},Object(o.b)(["whichUser"]))},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-wrapper-div"},[t._m(0),t._v(" "),!1===this.$store.state.anyoneLoggedIn?[s("div",{staticClass:"input-div"},[s("div",{staticClass:"username-div"},[s("label",{attrs:{for:"username"}},[t._v("Username:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.username,expression:"loginForm.username"}],attrs:{type:"text"},domProps:{value:t.loginForm.username},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"username",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"password-div"},[s("label",{attrs:{for:"password"}},[t._v("Password:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],attrs:{type:"password"},domProps:{value:t.loginForm.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validateFormAndUser(e)},input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}})]),t._v(" "),s("b-button",{on:{click:t.validateFormAndUser}},[t._v("LOGIN")])],1)]:this.$store.state.travelerLoggedIn?s("div",{staticClass:"traveler-logout"},[s("b-button",{staticClass:"trip-request-button",on:{click:function(e){return t.pushToTripRequestPage()}}},[t._v("TRIP REQUEST")]),t._v(" "),s("b-button",{staticClass:"logout-button",on:{click:function(e){return t.pushHome()}}},[t._v("LOGOUT")])],1):this.$store.state.agentLoggedIn?s("div",{staticClass:"agent-logout"},[s("b-button",{staticClass:"agent-tools-button",on:{click:function(e){return t.pushToTravelerPage()}}},[t._v("\n      TRAVELER SEARCH\n    ")]),t._v(" "),s("b-button",{staticClass:"logout-button",on:{click:function(e){return t.pushHome()}}},[t._v("LOGOUT")])],1):t._e(),t._v(" "),this.$store.state.errors.length?[s("div",{staticClass:"errors-div"},[s("ul",t._l(this.$store.state.errors,function(e){return s("li",{key:e},[t._v("\n          "+t._s(e)+"\n        ")])}),0)])]:t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h1-div"},[e("h1",{staticClass:"travel-tracker-h1"},[this._v("Travel Tracker")])])}]};var h=s("VU/8")(g,m,!1,function(t){s("9xt+")},"data-v-0c5cfd0e",null).exports,f={data:function(){return{selectedImage:null,image:""}},methods:{},computed:{getimage:function(){return!!this.$store.state.allDestinations.length&&this.$store.state.allDestinations[Math.floor(Math.random()*this.$store.state.allDestinations.length)].image}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.$store.state.anyoneLoggedIn?t._e():s("div",{staticClass:"main-container"},[s("div",{staticClass:"heading",style:{backgroundImage:"url('"+t.getimage+"')"}},[s("h1",[t._v("Your Voyage Awaits!")])]),t._v(" "),s("div",{staticClass:"grid container-fluid"},t._l(this.$store.state.allDestinations.slice(0,15),function(e){return s("div",{key:e.id,staticClass:"destination"},[s("b-img",{attrs:{src:e.image,alt:""}}),t._v(" "),s("p",[s("strong",[t._v(t._s(e.destination))])])],1)}),0)])},staticRenderFns:[]};var T={name:"App",metaInfo:{meta:[{property:"og:title",content:"Vue Travel Tracker"},{property:"og:site_name",content:"Vue Travel Tracker"},{property:"og:type",content:"website"},{name:"image",property:"og:image",content:"https://i.imgur.com/Mrt8abr.jpg"},{property:"og:description",content:"Web application built with vue.js which manages and tracks different trips for users and travel agents, by consuming and posting to an external API."}]},mounted:function(){this.$store.dispatch("getAllDestinations")},components:{Login:h,MainPageStyling:s("VU/8")(f,_,!1,function(t){s("rFec")},"data-v-bac67f14",null).exports}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("login"),this._v(" "),e("main-page-styling"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var D=s("VU/8")(T,b,!1,function(t){s("doI5")},null,null).exports,C=s("/ocq"),I=s("f3bp"),R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",[s("b-button",{staticClass:"back-to-agent-dashboard",on:{click:function(e){return t.backToAgentDashboard()}}},[t._v("BACK TO AGENT DASHBOARD")]),t._v(" "),s("h1",[t._v("Traveler Search")]),t._v(" "),t.state.travelerSearchActive?t._e():[s("h5",[t._v("\n      *Here you may search for a traveler by name. If the traveler has any\n      pending trips you will have the option to approve them*\n    ")]),t._v(" "),s("label",{attrs:{for:"traveler-choice"}},[s("strong",[t._v("Search for a Traveler: ")])]),t._v(" "),s("b-form-input",{attrs:{list:"travelers"},model:{value:t.traveler,callback:function(e){t.traveler=e},expression:"traveler"}}),t._v(" "),s("datalist",{attrs:{id:"travelers"}},t._l(t.state.travelers,function(e){return s("option",{key:e.id},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0),t._v(" "),s("b-button",{staticClass:"show-traveler",on:{click:function(e){return t.getTravelersInfo()}}},[t._v("SHOW TRAVELER")])],t._v(" "),t.state.travelerSearchActive?[s("h1",[t._v(t._s(t.state.traveler)+"'s travels")]),t._v(" "),s("h2",[t._v("Total Spent on Trips: "+t._s(t._f("currency")(t.addTotalTripCosts)))]),t._v(" "),t.state.travHasPendingTrips?s("div",{staticClass:"pending-trips-div"},[s("h2",[t._v("Pending Trips:")]),t._v(" "),t._l(t.state.travelersPendingTrips,function(e){return s("div",{key:e.id,staticClass:"trips pending-trips"},[s("div",{staticClass:"destinationimage"},[s("b-img",{attrs:{fluid:"",src:t.state.allDestinations[e.destinationID-1].image}})],1),t._v(" "),s("div",{staticClass:"trip-status"},[t._v("\n          "+t._s(e.status)+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-date"},[t._v("\n          "+t._s(e.date)+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-destination"},[t._v("\n          "+t._s(t.state.allDestinations[e.destinationID-1].destination)+"\n        ")]),t._v(" "),s("b-button",{on:{click:function(s){return t.approveTrip(e.id)}}},[t._v("Approve")]),t._v(" "),s("b-button",{on:{click:function(s){return t.deleteTrip(e.id)}}},[t._v("Delete")])],1)})],2):s("div",[t._v(t._s(t.state.traveler)+" has no pending trips")]),t._v(" "),s("h2",[t._v("Approved Trips:")]),t._v(" "),s("div",{staticClass:"approved-trips"},t._l(t.state.travelersApprovedTrips,function(e){return s("div",{key:e.id+10,staticClass:"trips"},[s("div",{staticClass:"destinationimage"},[s("b-img",{attrs:{fluid:"",src:t.state.allDestinations[e.destinationID-1].image}})],1),t._v(" "),s("div",{staticClass:"trip-date"},[s("strong",[t._v("Trip Date:")]),t._v("\n          "+t._s(e.date)+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-destination"},[s("strong",[t._v("Trip Destination:")]),t._v("\n          "+t._s(t.state.allDestinations[e.destinationID-1].destination)+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-duration"},[s("strong",[t._v("Trip Duration: ")]),t._v(t._s(e.duration)+" days\n        ")]),t._v(" "),s("div",{staticClass:"trip-status"},[s("strong",[t._v("Trip Status:")]),t._v("\n          "+t._s(e.status)+"\n        ")])])}),0)]:t._e()],2)},staticRenderFns:[]};var q=s("VU/8")({data:function(){return{traveler:"",state:this.$store.state}},methods:{backToAgentDashboard:function(){this.$router.push("/agent-dashboard")},getTravelersInfo:function(){this.$store.dispatch("setTravelerIdForAgent",this.traveler),this.$store.dispatch("getTravelersTrips"),this.$store.dispatch("getTravsTripsAndDestinations"),this.$store.dispatch("getUpcomingAndPastTrips"),this.$store.dispatch("calcAmntTravSpent"),this.$store.dispatch("travHasPendingTrips"),this.$store.dispatch("getTravsPendingAndApprovedTrips")},approveTrip:function(t){this.$store.dispatch("approveTrip",t)},deleteTrip:function(t){this.$store.dispatch("deleteTrip",t)}},computed:{addTotalTripCosts:function(){return this.$store.state.eachTripsCost.reduce(function(t,e){return t+e},0)}}},R,!1,function(t){s("Hy9K")},"data-v-1506ebda",null).exports,F=s("SyB7"),y={mounted:function(){!1===this.$store.state.travelerLoggedIn&&this.$router.push("/"),this.makeFormBlank()},data:function(){return{state:this.$store.state,destination:"",index:"",allDestinations:this.$store.state.allDestinations,tripRequestForm:{destination:"",numberOfTravs:"",startDate:"",endDate:""},errors:[]}},methods:{validateFormAndCalculateTripRequest:function(){this.$store.dispatch("validateTripRequestForm",this.tripRequestForm),!0===this.isTripRequestFormValid&&this.$store.dispatch("calculateTripRequest",this.tripRequestForm)},makeFormBlank:function(){this.tripRequestForm.destination="",this.tripRequestForm.numberOfTravs="",this.tripRequestForm.startDate="",this.tripRequestForm.endDate=""},submitTripRequest:function(){this.$store.dispatch("submitTripRequest"),this.$router.push("/traveler-dashboard")},startDate:function(){return Object(F.a)(this.$store.state.tripRequestInfo.startDate).toDateString()},endDate:function(){return Object(F.a)(this.$store.state.tripRequestInfo.endDate).toDateString()},backToTravelerDashboard:function(){this.$store.state.tripRequestSubmitted=!0,this.$router.go(-1)}},computed:n()({},Object(o.b)(["isTripRequestFormValid"]),Object(o.b)(["tripRequestInfoCreated"]),Object(o.b)(["hasTripRequestBeenSubmitted"]))},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"trip-request"},[!1===this.isTripRequestFormValid|!1===this.tripRequestInfoCreated?s("section",{staticClass:"container",attrs:{id:"request-form"}},[s("b-button",{staticClass:"back-button",on:{click:function(e){return t.backToTravelerDashboard()}}},[t._v("\n      BACK TO TRAVELER DASHBOARD\n    ")]),t._v(" "),s("h3",[t._v("Request Trips:")]),t._v(" "),s("label",{attrs:{for:"destination-choice"}},[t._v("Search for a Destination:")]),t._v(" "),s("b-form-input",{attrs:{list:"destinations"},model:{value:t.tripRequestForm.destination,callback:function(e){t.$set(t.tripRequestForm,"destination",e)},expression:"tripRequestForm.destination"}}),t._v(" "),s("datalist",{attrs:{id:"destinations"}},t._l(t.allDestinations,function(e){return s("option",{key:e.id},[t._v("\n        "+t._s(e.destination)+"\n      ")])}),0),t._v(" "),s("label",{attrs:{for:"number-of-travelers"}},[t._v("Number of Travelers:")]),t._v(" "),s("b-form-input",{attrs:{list:"number-of-travelers"},model:{value:t.tripRequestForm.numberOfTravs,callback:function(e){t.$set(t.tripRequestForm,"numberOfTravs",e)},expression:"tripRequestForm.numberOfTravs"}}),t._v(" "),s("datalist",{attrs:{id:"number-of-travelers"}},t._l(20,function(e){return s("option",{key:e},[t._v("\n        "+t._s(e)+"\n      ")])}),0),t._v(" "),s("label",{attrs:{for:"trip-start"}},[t._v("Please select a start date:")]),t._v(" "),s("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"trip-start"},model:{value:t.tripRequestForm.startDate,callback:function(e){t.$set(t.tripRequestForm,"startDate",e)},expression:"tripRequestForm.startDate"}}),t._v(" "),s("label",{attrs:{for:"trip-end"}},[t._v("Please select an end date:")]),t._v(" "),s("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"trip-end"},model:{value:t.tripRequestForm.endDate,callback:function(e){t.$set(t.tripRequestForm,"endDate",e)},expression:"tripRequestForm.endDate"}}),t._v(" "),s("b-button",{staticClass:"trip-request-button",on:{click:function(e){return t.validateFormAndCalculateTripRequest()}}},[t._v("\n      CALCULATE\n    ")])],1):t._e(),t._v(" "),this.tripRequestInfoCreated?[this.tripRequestInfoCreated?s("section",{staticClass:"container confirm-trip"},[s("h1",{staticClass:"confirm-h1"},[t._v("Please confirm your trip details:")]),t._v(" "),s("div",{staticClass:"destinationimage"},[s("img",{attrs:{src:t.state.tripRequestInfo.destinationImageUrl}})]),t._v(" "),s("div",{staticClass:"trip-info"},[s("div",{staticClass:"trip-destination"},[s("strong",[t._v(" Traveling To: ")]),t._v("\n          "+t._s(t.state.tripRequestInfo.destination)+"\n        ")]),t._v(" "),s("div",{staticClass:"number-of-travelers"},[s("strong",[t._v(" Total Number of Travelers:")]),t._v("\n          "+t._s(t.state.tripRequestInfo.numberOfTravelers)+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-start-date"},[s("strong",[t._v("Trip Begins: ")]),t._v("\n          "+t._s(t.startDate())+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-length"},[s("strong",[t._v("Trip Length: ")]),t._v("\n          "+t._s(t.state.tripRequestInfo.tripLength)+"\n        ")]),t._v(" "),s("div",{staticClass:"trip-end-date"},[s("strong",[t._v("Trip Ends: ")]),t._v("\n          "+t._s(t.endDate())+"\n        ")]),t._v(" "),s("div",{staticClass:"lodging-costs"},[s("strong",[t._v("Estimated lodging costs @\n            "+t._s(t._f("currency")(t.state.tripRequestInfo.destinationsLodgingCost))+" per\n            day:\n          ")]),t._v("\n          "+t._s(t._f("currency")(t.state.tripRequestInfo.lodgingCost))+"\n        ")]),t._v(" "),s("div",{staticClass:"flight-costs"},[s("strong",[t._v("Estimated flight costs @\n            "+t._s(t._f("currency")(t.state.tripRequestInfo.destinationsFlightCost))+" per\n            person:\n          ")]),t._v("\n          "+t._s(t._f("currency")(t.state.tripRequestInfo.flightCost))+"\n        ")]),t._v(" "),s("div",{staticClass:"fees"},[s("strong",[t._v("Estimated fees: ")]),t._v("\n          "+t._s(t._f("currency")(t.state.tripRequestInfo.agentFee))+"\n        ")]),t._v(" "),s("div",{staticClass:"total-cost"},[s("strong",[t._v("Estimated total cost: ")]),t._v("\n          "+t._s(t._f("currency")(t.state.tripRequestInfo.totalTripCost))+"\n        ")])]),t._v(" "),s("div",{staticClass:"submit-request"},[t._v("\n        If you would like to submit this request, please click 'Submit Trip'\n        below:\n        "),s("button",{on:{click:t.submitTripRequest}},[t._v("Submit Trip")])])]):t._e()]:t._e()],2)},staticRenderFns:[]};var A=s("VU/8")(y,$,!1,function(t){s("TBmE")},"data-v-77a6b892",null).exports;r.default.use(C.a),r.default.use(I.a);var k=new C.a({routes:[{path:"/#",name:"Home",component:D},{path:"/agent-dashboard",name:"AgentDashboard",component:d},{path:"/traveler-dashboard/",name:"TravelerDashboard",component:v},{path:"/traveler-search/",name:"TravelerSearch",component:q},{path:"/trip-request-form/",name:"TripRequestForm",component:A}]}),w=s("mvHQ"),P=s.n(w),L=s("mtWM"),E=s.n(L),U=s("Yo08"),S=s("xJw6"),O=s("OZw1");r.default.use(o.a);var V=new o.a.Store({state:{allLodging:[],allFlight:0,agentEarnings:[],agentLogin:"agency",agentLoggedIn:!1,allDestinations:[],allTrips:[],anyoneLoggedIn:!1,approvedTrips:[],correctPw:"travel2020",destinations:[],eachTripsCost:[],errors:[],formData:{},formHasUnAndPw:!1,formIsValid:!1,passwordIsValid:!1,pendingTrips:[],picUrl:"",todaysTrips:[],totalMoneyForTrips:Number,traveler:{},travelerId:Number,travelerLoggedIn:!1,travelers:[],travelersDestinations:[],travelersPreviousTrips:[],travelerSearchActive:!1,travelersTrips:[],travelersUpcomingTrips:[],tripRequestApproved:!1,tripRequestFormValid:!1,tripRequestInfo:{agentFee:"",destination:"",destinationsFlightCost:"",destinationId:Number,destinationImageUrl:"",destinationsLodgingCost:"",endDate:"",flightCost:"",lodgingCost:"",numberOfTravelers:"",startDate:"",totalTripCost:"",tripLength:""},tripRequestInfoCreated:!1,tripRequestSubmitted:!1,trips:[],user:"",usernameIsValid:!1},getters:{whichUser:function(t){return t.user},isTripRequestFormValid:function(t){return t.tripRequestFormValid},tripRequestInfoCreated:function(t){return t.tripRequestInfoCreated},hasTripRequestBeenSubmitted:function(t){return t.tripRequestSubmitted}},mutations:{checkForErrors:function(t,e){t.errors=[],e.username||t.errors.push("Username is required"),e.password||t.errors.push("Password is required"),e.username&&e.password&&(t.formIsValid=!0)},validatePassword:function(t,e){t.formIsValid&&e.password===t.correctPw?t.passwordIsValid=!0:t.errors.push("Please enter a valid password")},validateUsername:function(t,e){e.username.toLowerCase()===t.agentLogin&&(t.usernameIsValid=!0),e.username.toLowerCase().includes("traveler")&&t.travelers.forEach(function(s){parseInt(e.username.slice(8),10)===s.id&&(t.usernameIsValid=!0)}),!1===t.usernameIsValid&&t.errors.push("Please enter a valid username")},determineUser:function(t,e){t.formIsValid&&t.passwordIsValid&&t.usernameIsValid&&(e.username.toLowerCase()===t.agentLogin&&(t.user=e.username.toLowerCase()),e.username.toLowerCase().includes("traveler")&&t.travelers.forEach(function(s){parseInt(e.username.slice(8),10)===s.id&&(t.user=e.username.toLowerCase())}))},agentLogin:function(t){k.push("/Agent-Dashboard"),t.agentLoggedIn=!0,t.anyoneLoggedIn=!0},travelerLogin:function(t,e){t.travelerId=e.username.slice(8),t.traveler=this.state.travelers[t.travelerId-1],t.anyoneLoggedIn=!0,t.travelerLoggedIn=!0,k.push("/Traveler-Dashboard")},getAllTravelers:function(t,e){t.travelers=e.travelers},getAllTrips:function(t,e){t.allTrips=e.trips},getTravelersTrips:function(t){t.allTrips.forEach(function(e,s){var r=t.allTrips[s].userID;parseInt(t.travelerId)===r&&t.travelersTrips.push(e)})},logOut:function(t){t.travelerLoggedIn=!1,t.agentLoggedIn=!1,t.anyoneLoggedIn=!1,location.reload()},getAllDestinations:function(t,e){t.allDestinations=e.destinations},getTravelersDestinations:function(t){t.travelersTrips.forEach(function(e){var s=void 0;for(s=0;s<t.allDestinations.length;s++)e.destinationID===t.allDestinations[s].id&&t.travelersDestinations.push(t.allDestinations[s])})},sendPicUrlToState:function(t,e){t.picUrl=e},getTravsTripsAndDestinations:function(t){t.travelersTrips.forEach(function(e){for(var s=0;s<t.allDestinations.length;s++)e.destinationID===t.allDestinations[s].id&&(t.trips.push(e),t.destinations.push(t.allDestinations[s]))})},getUpcomingAndPastTrips:function(t){t.trips.forEach(function(e){var s=Object(U.a)(new Date(e.date),new Date);return s?t.travelersPreviousTrips.push(e):!1===s&&t.travelersUpcomingTrips.push(e)})},calcAmntTravSpent:function(t){t.travelersTrips.forEach(function(e){for(var s=0;s<t.allDestinations.length;s++)if(e.destinationID===t.allDestinations[s].id&&"approved"===e.status){var r=t.allDestinations[s].estimatedFlightCostPerPerson*e.travelers,i=t.allDestinations[s].estimatedLodgingCostPerDay*e.duration,a=r+i+.1*(i+r);t.eachTripsCost.push(a)}})},validateTripRequestForm:function(t,e){t.hasTripRequestBeenSubmitted=!1,t.isTripRequestFormValid=!1,t.tripRequestInfoCreated=!1,t.errors=[],!1===t.tripRequestFormValid&&(e.destination||t.errors.push("Please select a destination"),e.numberOfTravs||t.errors.push("Please enter the number of travelers"),e.startDate&&e.endDate||t.errors.push("Start AND End date required"),e.destination&&e.numberOfTravs&&e.startDate&&e.endDate&&(t.tripRequestFormValid=!0))},calculateTripRequest:function(t,e){t.tripRequestInfoCreated=!1,t.allDestinations.forEach(function(s){if(e.destination===s.destination){t.tripRequestInfo.destination=e.destination,t.tripRequestInfo.numberOfTravelers=e.numberOfTravs,t.tripRequestInfo.startDate=e.startDate,t.tripRequestInfo.endDate=e.endDate,t.tripRequestInfo.flightCost=s.estimatedFlightCostPerPerson*e.numberOfTravs,t.tripRequestInfo.tripLength=Object(S.a)(new Date(e.endDate),new Date(e.startDate)),t.tripRequestInfo.lodgingCost=s.estimatedLodgingCostPerDay*Number(t.tripRequestInfo.tripLength.slice(0,1));var r=t.tripRequestInfo.lodgingCost+t.tripRequestInfo.flightCost;t.tripRequestInfo.agentFee=.1*r,t.tripRequestInfo.totalTripCost=r+t.tripRequestInfo.agentFee,t.tripRequestInfo.destinationImageUrl=s.image,t.tripRequestInfoCreated=!0,t.tripRequestInfo.destinationsLodgingCost=s.estimatedLodgingCostPerDay,t.tripRequestInfo.destinationsFlightCost=s.estimatedFlightCostPerPerson,t.destinationID=s.id}})},submitTrip:function(t){var e=P()({id:parseFloat(t.allTrips.length+1),userID:t.traveler.id,destinationID:t.destinationID,travelers:parseFloat(t.tripRequestInfo.numberOfTravelers),date:t.tripRequestInfo.startDate.replace(/-/g,"/"),duration:Number(t.tripRequestInfo.tripLength.slice(0,1)),status:"pending",suggestedActivities:[""]}),s=JSON.parse(e);E.a.post("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/trips/trips",s).then(function(e){var s=e.data;t.travelersUpcomingTrips.push(s.newResource),t.tripRequestSubmitted=!0}).catch(function(t){console.log(t)}),t.isTripRequestFormValid=!1,t.tripRequestInfoCreated=!1,t.hasTripRequestBeenSubmitted=!1},refreshTravelerDashboard:function(t){t.tripRequestFormValid=!1},getPendingTrips:function(t,e){e.forEach(function(e){"pending"===e.status&&t.pendingTrips.push(e)})},setTravelerIdForAgent:function(t,e){t.travelers.forEach(function(s){s.name===e&&(t.travelerId=s.id,t.travelerSearchActive=!0,t.traveler=e)})},getTodaysTrips:function(t){t.allTrips.forEach(function(e){var s=new Date(e.date),r=new Date;Object(O.a)(s,r)&&t.todaysTrips.push(e)})},getAgentEarnings:function(t){t.totalMoneyForTrips=0,t.allTrips.forEach(function(e){"approved"===e.status&&(t.approvedTrips.push(e),t.allDestinations.forEach(function(s){if(s.id===e.destinationID){var r=s.estimatedFlightCostPerPerson*e.travelers+s.estimatedLodgingCostPerDay*e.duration;t.totalMoneyForTrips+=r}}))})},approveTrip:function(t,e){var s=P()({id:e,status:"approved"}),r=JSON.parse(s);E.a.post("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/trips/updateTrip",r).then(function(e){var s=e.data;t.pendingTrips.forEach(function(e,r){e.id===s.updatedResource.id&&t.pendingTrips.splice(r)}),t.travelersTrips.forEach(function(e,r){e.id===s.updatedResource.id&&t.travelersTrips.splice(r)})}).catch(function(t){console.log(t)}),t.tripRequestApproved=!0},deleteTrip:function(t,e){t.pendingTrips.forEach(function(s,r){e===s.id&&t.pendingTrips.splice(r,1)});var s={id:e};fetch("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/trips/trips",{method:"DELETE",headers:{"Content-Type":"application/json"},body:P()(s)})}},actions:{checkForErrors:function(t,e){t.commit("checkForErrors",e)},validatePassword:function(t,e){t.commit("validatePassword",e)},validateUsername:function(t,e){t.commit("validateUsername",e)},determineUser:function(t,e){t.commit("determineUser",e)},agentLogin:function(t){t.commit("agentLogin")},travelerLogin:function(t,e){t.commit("travelerLogin",e)},getAllTravelers:function(t){var e=t.commit;E.a.get("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/travelers/travelers").then(function(t){e("getAllTravelers",t.data)})},getAllTrips:function(t){var e=t.commit;E.a.get("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/trips/trips").then(function(t){e("getAllTrips",t.data)})},getTravelersTrips:function(t){t.commit("getTravelersTrips")},logOut:function(t){t.commit("logOut")},separateTravelersTrips:function(t){t.commit("separateTravelersTrips")},getAllDestinations:function(t){var e=t.commit;E.a.get("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/destinations/destinations").then(function(t){e("getAllDestinations",t.data)})},sendPicUrlToState:function(t,e){t.commit("sendPicUrlToState",e)},getTravsTripsAndDestinations:function(t){t.commit("getTravsTripsAndDestinations")},getUpcomingAndPastTrips:function(t){t.commit("getUpcomingAndPastTrips")},calcAmntTravSpent:function(t){t.commit("calcAmntTravSpent")},validateTripRequestForm:function(t,e){t.commit("validateTripRequestForm",e)},calculateTripRequest:function(t,e){t.commit("calculateTripRequest",e)},submitTripRequest:function(t){t.commit("submitTrip")},refreshTravelerDashboard:function(t){t.commit("refreshTravelerDashboard")},getRefreshedTrips:function(t){var e=t.commit;E.a.get("https://fe-apps.herokuapp.com/api/v1/travel-tracker/data/trips/trips").then(function(t){e("getRefreshedTrips",t.data)})},getPendingTrips:function(t,e){t.commit("getPendingTrips",e)},setTravelerIdForAgent:function(t,e){t.commit("setTravelerIdForAgent",e)},getTodaysTrips:function(t){t.commit("getTodaysTrips")},getAgentEarnings:function(t){t.commit("getAgentEarnings")},approveTrip:function(t,e){t.commit("approveTrip",e)},deleteTrip:function(t,e){t.commit("deleteTrip",e)}}});r.default.use(i.a),r.default.use(i.b),r.default.config.productionTip=!1,new r.default({el:"#app",router:k,store:V,components:{App:D,Login:h},template:"<App/>"})},TBmE:function(t,e){},doI5:function(t,e){},ftKZ:function(t,e){},rFec:function(t,e){},uwAa:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a08ebc45883597371f1c.js.map